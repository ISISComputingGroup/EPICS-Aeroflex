record(ai, "$(P)RF_LEVEL")
{
    field(SCAN, "2 second")
    field(DESC, "RF level")
    field(DTYP, "stream")
	field(EGU, "DBM")
    field(INP, "@aeroflex_common.proto getRFLevel $(PORT)")
	field(PREC, "6")

    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:RF_LEVEL")
    field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)RF_LEVEL:SP")
{
    field(DESC, "Set RF level")
	field(DTYP, "stream")
	field(OUT, "@aeroflex_common.proto setRFLevel $(PORT)")
	field(PREC, "6")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:RF_LEVEL:SP")
    field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)RF_LEVEL:SP_NO_ACTION")
{
	field(PREC, "6")
	info(autosaveFields, "VAL")
	field(UDFS, "NO_ALARM")
}

record(mbbi, "$(P)MODE")
{
    field(SCAN, "2 second")
    field(DESC, "Get modulation")
    field(DTYP, "stream")

    field(INP, "@aeroflex_$(DEV_TYPE).proto getModulation $(PORT)")
	
	field(ZRST, "AM,FM,PULSE")
	field(ONST, "AM,FM")
	field(TWST, "AM,PM,PULSE")
	field(THST, "AM,PM")
	field(FRST, "AM,PULSE")
	field(FVST, "AM")
	field(SXST, "FM,PULSE")
	field(SVST, "FM")
	field(EIST, "PM,PULSE")
	field(NIST, "PM")
	field(TEST, "FSK2L,PULSE")
	field(ELST, "FSK2L")
	field(TVST, "FSK4L")
	
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:MODE")
    field(SDIS, "$(P)DISABLE")
}

record(mbbo, "$(P)MODE:SP")
{
    field(DESC, "Set modulation")
    field(SCAN, "Passive")
    field(DTYP, "stream")
    field(OUT, "@aeroflex_$(DEV_TYPE).proto setModulation $(PORT)")
	
	field(ZRST, "AM,FM,PULSE")
	field(ONST, "AM,FM")
	field(TWST, "AM,PM,PULSE")
	field(THST, "AM,PM")
	field(FRST, "AM,PULSE")
	field(FVST, "AM")
	field(SXST, "FM,PULSE")
	field(SVST, "FM")
	field(EIST, "PM,PULSE")
	field(NIST, "PM")
	field(TEST, "FSK2L,PULSE")
	field(ELST, "FSK2L")
	field(TVST, "FSK4L")
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:MODE:SP")
    field(SDIS, "$(P)DISABLE")
}

record(calcout, "$(P)SEND_MODE_PARAMS")
{
    field(DESC, "Set modulation button")
    field(SCAN, "Passive")
	field(INPA, "$(P)MODE:SP_NO_ACTION")
	field(INPB, "$(P)PULSE_CHECK:SP")
	field(CALC, "(B = 0) ? ((2 * A) + 1) : (2 * A)")
	field(OUT, "$(P)MODE:SP PP")
}

### SIMULATION RECORDS ###

record(mbbi,"$(P)SIM:MODE")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)SIM:MODE","$(P)SIM:MODE:SP")

record(ai,"$(P)SIM:RF_LEVEL")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P)SIM:RF_LEVEL","$(P)SIM:RF_LEVEL:SP")

